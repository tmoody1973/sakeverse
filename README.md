# SakÃ©verse ğŸ¶

**AI-powered sake discovery with Kiki, your voice-first sommelier who bridges wine knowledge to sake exploration.**

> ğŸ† Built for the Kiro Hackathon (January 2026)

## Overview

SakÃ©verse solves a real problem: wine enthusiasts curious about sake are overwhelmed by Japanese terminology and unfamiliar flavor profiles. Kiki (åˆ©ãé…’ - "sake tasting") is a conversational AI sommelier that translates your wine preferences into personalized sake recommendations.

**Target Users:**
- Wine lovers wanting to explore sake ("I like Pinot Noir" â†’ "Try aged Junmai")
- Sake beginners needing patient, voice-first guidance
- Enthusiasts tracking their sake journey

## Features

### ğŸ¤ Voice-First Sommelier (Kiki)
Real-time voice conversations using OpenAI Realtime API with WebRTC for sub-200ms latency. Ask questions naturally and get personalized recommendations.

### ğŸ§  Multi-Layer RAG System
- **Vector Search**: 104 Tippsy products with semantic matching
- **Wine-to-Sake Knowledge**: 13 pre-chunked wine preference translations
- **Food Pairing RAG**: 9 knowledge chunks for pairing recommendations
- **Gemini File Search**: 5 PDF sake books for deep expertise
- **Perplexity API**: Real-time web search for current trends

### ğŸ¨ Dynamic UI Generation
Thesys C1 generates React components during conversationsâ€”sake cards with images, temperature guides, comparison tables, and more.

### ğŸ“š User Sake Library
Save favorite sake to your personal library. Session-based storage works without authentication.

### ğŸ›’ Tippsy Integration
Product cards link directly to Tippsy for purchase, with real images and pricing.

## Tech Stack

| Layer | Technology |
|-------|------------|
| Frontend | Next.js 15, TypeScript, React 19, Tailwind CSS |
| Backend | Convex (realtime database, serverless functions) |
| Voice | OpenAI Realtime API (WebRTC) |
| Dynamic UI | Thesys C1 with Claude Sonnet 4 |
| RAG | Gemini File Search, Perplexity API, OpenAI Embeddings |
| Auth | Clerk (optional) |
| Styling | RetroUI neobrutalism + cherry blossom theme |

## Getting Started

### Prerequisites
- Node.js 18+
- npm or yarn
- Convex account (free tier works)
- API keys for: OpenAI, Thesys, Gemini, Perplexity (optional)

### Installation

```bash
# Clone the repository
git clone https://github.com/yourusername/sakeverse.git
cd sakeverse

# Install dependencies
npm install

# Set up Convex
npx convex dev
```

### Environment Variables

Create `.env.local`:

```env
# Convex (auto-generated by npx convex dev)
CONVEX_DEPLOYMENT=your-deployment
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud

# OpenAI (for voice + embeddings)
OPENAI_API_KEY=sk-...

# Thesys C1 (for dynamic UI)
THESYS_API_KEY=...

# Clerk (optional - for auth)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_...
CLERK_SECRET_KEY=sk_...
```

Set Convex environment variables:
```bash
npx convex env set OPENAI_API_KEY sk-...
npx convex env set GEMINI_API_KEY ...
npx convex env set PERPLEXITY_API_KEY ...
```

### Running Locally

```bash
# Terminal 1: Convex backend
npx convex dev

# Terminal 2: Next.js frontend
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

### Import Data

```bash
# Import Tippsy sake catalog (104 products)
npx convex run importTippsy:importFromJSON

# Import wine-to-sake knowledge
npx convex run wineToSake:importWineToSakeKnowledge

# Import food pairing knowledge
npx convex run foodPairing:importFoodPairingKnowledge
```

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Interface                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Voice Chat  â”‚  â”‚  C1 Chat    â”‚  â”‚  Library Page   â”‚  â”‚
â”‚  â”‚ (Realtime)  â”‚  â”‚ (Streaming) â”‚  â”‚  (Saved Sake)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                  â”‚
          â–¼                â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Query Router                           â”‚
â”‚  Wine preference? â†’ Wine-to-Sake RAG                    â”‚
â”‚  Product search?  â†’ Vector Search (Tippsy)              â”‚
â”‚  Food pairing?    â†’ Food Pairing RAG                    â”‚
â”‚  Knowledge?       â†’ Gemini File Search                  â”‚
â”‚  Current info?    â†’ Perplexity API                      â”‚
â”‚  Visual UI?       â†’ Thesys C1                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Convex Backend                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Products â”‚  â”‚Knowledge â”‚  â”‚ Library  â”‚  â”‚ Users   â”‚  â”‚
â”‚  â”‚ (Vector) â”‚  â”‚ Chunks   â”‚  â”‚ (Saved)  â”‚  â”‚         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Kiro CLI Workflow

This project was built entirely with Kiro CLI, demonstrating AI-assisted development at scale.

### Custom Prompts Created (18 total)

| Prompt | Purpose |
|--------|---------|
| `@prime` | Load project context at session start |
| `@plan-feature` | Create comprehensive implementation plans |
| `@execute` | Systematic task execution |
| `@plan-rag` | Design multi-source RAG architecture |
| `@enhance-voice-agent` | Refine Kiki's personality and capabilities |
| `@update-devlog` | Maintain development documentation |
| `@test-rag` | Validate RAG system responses |
| `@code-review` | Technical code review |
| `@code-review-hackathon` | Hackathon submission evaluation |
| `@write-readme` | Generate comprehensive README |
| `@update-steering` | Refine steering documents |

### Steering Documents

- **product.md**: Product vision, user stories, success criteria
- **tech.md**: Technical architecture, stack decisions, patterns
- **structure.md**: File organization, naming conventions

### Development Pattern

```
@prime â†’ @plan-feature â†’ @execute â†’ @code-review â†’ @update-devlog
```

### Time Savings

| Task | Manual Estimate | With Kiro | Savings |
|------|-----------------|-----------|---------|
| Project setup | 4 hours | 45 min | 81% |
| Feature planning | 2 hours | 30 min | 75% |
| RAG implementation | 8 hours | 2 hours | 75% |
| Documentation | 3 hours | 30 min | 83% |

## Demo

ğŸ¥ **Video Demo**: [Coming Soon]

### Key Interactions

1. **Wine-to-Sake Translation**
   > "I love Pinot Noir, what sake should I try?"
   > â†’ Kiki recommends aged Junmai or Koshu with explanation

2. **Food Pairing**
   > "What sake goes with spicy Korean BBQ?"
   > â†’ Kiki suggests off-dry Junmai with cooling effect

3. **Product Discovery**
   > "Show me smooth sake under $50"
   > â†’ Dynamic UI cards with images, prices, Tippsy links

4. **Save to Library**
   > "Save that Dassai 23 for later"
   > â†’ Added to personal library, accessible at /library

## Development Journey

### Day 1 (Jan 3)
- Project setup with `@quickstart`
- RetroUI design system implementation
- Convex schema and foundation

### Day 2 (Jan 4)
- Complete RAG triad (Vector + Gemini + Perplexity)
- Agent rebrand: Yuki â†’ Kiki (åˆ©ãé…’)
- Wine-to-sake knowledge base (13 chunks)
- Thesys C1 dynamic UI integration
- User library feature
- Food pairing RAG (9 chunks)

### Challenges Solved
- **Streaming with runTools**: Manual iteration over ChatCompletionStreamingRunner
- **Gemini File API**: Correct resumable upload protocol via Context7 MCP
- **C1Chat integration**: Overlay pattern for voice controls on C1Chat

## Future Improvements

With more time, I would add:

- **Interactive Japan Map**: Mapbox GL with prefecture-based brewery exploration
- **AI-Generated Podcasts**: Multi-speaker educational content with Gemini TTS
- **Badge System**: WSET-style certifications and progress tracking
- **Temperature Lab**: Interactive serving temperature recommendations
- **Brewery Deep Dives**: Detailed brewery profiles with history and specialties

## Project Structure

```
sakeverse/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx          # Home dashboard
â”‚   â”œâ”€â”€ kiki/page.tsx     # Voice chat interface
â”‚   â”œâ”€â”€ library/          # Saved sake library
â”‚   â””â”€â”€ api/c1/chat/      # C1 API route with tools
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/               # RetroUI components
â”‚   â”œâ”€â”€ voice/            # Voice chat components
â”‚   â””â”€â”€ layout/           # Header, BottomNav
â”œâ”€â”€ convex/
â”‚   â”œâ”€â”€ schema.ts         # Database schema
â”‚   â”œâ”€â”€ sake.ts           # Product queries
â”‚   â”œâ”€â”€ embeddings.ts     # Vector search
â”‚   â”œâ”€â”€ wineToSake.ts     # Wine preference RAG
â”‚   â”œâ”€â”€ foodPairing.ts    # Food pairing RAG
â”‚   â”œâ”€â”€ geminiRAG.ts      # PDF knowledge search
â”‚   â”œâ”€â”€ perplexityAPI.ts  # Live web search
â”‚   â””â”€â”€ userLibrary.ts    # Saved sake functions
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useVoiceChat.ts   # OpenAI Realtime integration
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ thesys/           # C1 client and prompts
â””â”€â”€ .kiro/
    â”œâ”€â”€ steering/         # Product, tech, structure docs
    â””â”€â”€ prompts/          # 18 custom development prompts
```

## License

MIT

---

Built with ğŸ¶ and Kiro CLI for the Dynamous Hackathon 2026
