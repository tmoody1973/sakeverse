# SakÃ©cosm ğŸ¶

**AI-powered sake discovery with Kiki, your voice-first sommelier who bridges wine knowledge to sake exploration.**

> ğŸ† Built for the Kiro Hackathon (January 2026)

## Overview

SakÃ©cosm solves a real problem: wine enthusiasts curious about sake are overwhelmed by Japanese terminology and unfamiliar flavor profiles. Kiki (åˆ©ãé…’ - "sake tasting") is a conversational AI sommelier that translates your wine preferences into personalized sake recommendations.

**Target Users:**
- Wine lovers wanting to explore sake ("I like Pinot Noir" â†’ "Try aged Junmai")
- Sake beginners needing patient, voice-first guidance
- Enthusiasts tracking their sake journey

## Features

### ğŸ¤ Voice-First Sommelier (Kiki)
Real-time voice conversations using OpenAI Realtime API with WebRTC for sub-200ms latency. Ask questions naturally and get personalized recommendations.

### ğŸ—¾ Interactive Japan Map
Explore sake regions with an interactive Mapbox-powered map of Japan's 47 prefectures:
- Click any prefecture to see local breweries and products
- AI-generated regional descriptions via Perplexity (cached for all users)
- Color-coded prefectures showing which have brewery data
- Regional sake styles, key characteristics, and famous breweries

### ğŸ“š Learning System with Gamification
Complete sake courses with AI-generated content:
- **Courses & Chapters**: Structured learning paths on sake fundamentals, brewing, tasting
- **Quizzes**: Test knowledge with chapter quizzes and final exams
- **XP & Levels**: Earn 25 XP per chapter, 50-100 XP per quiz
- **10 Badge Levels**: From "Sake Curious" to "Sake Grandmaster" with Stardew Valley-style artwork
- **Progress Tracking**: Dashboard shows real stats from Convex

### ğŸ§  Multi-Layer RAG System
- **Vector Search**: 104 Tippsy products with semantic matching (OpenAI embeddings)
- **Wine-to-Sake Knowledge**: 13 pre-chunked wine preference translations
- **Food Pairing RAG**: 9 knowledge chunks for pairing recommendations
- **Gemini File Search**: 5 PDF sake books for deep expertise
- **Perplexity API**: Real-time web search for current trends and prefecture descriptions

### ğŸ¨ Dynamic UI Generation
Thesys C1 generates React components during conversationsâ€”sake cards with images, temperature guides, comparison tables, and more.

### ğŸ“Š Personalized Dashboard
- Real user stats (XP, level, badge) from Convex
- Wine-to-sake recommendations based on preferences
- Food pairing of the day
- Course progress tracking
- Personalized sake recommendations based on taste preferences

### ğŸ“š User Sake Library
Save favorite sake to your personal library with Clerk authentication.

### ğŸ›’ Tippsy Integration
Product cards link directly to Tippsy for purchase, with real images and pricing from 104 imported products.

## Tech Stack

| Layer | Technology |
|-------|------------|
| Frontend | Next.js 15, TypeScript, React 19, Tailwind CSS |
| Backend | Convex (realtime database, serverless functions) |
| Voice | OpenAI Realtime API (WebRTC) |
| Dynamic UI | Thesys C1 with Claude Sonnet 4 |
| Maps | Mapbox GL JS, react-map-gl |
| RAG | Gemini File Search, Perplexity API, OpenAI Embeddings |
| Auth | Clerk |
| Styling | RetroUI neobrutalism + cherry blossom theme |

## Pages & Routes

| Route | Description |
|-------|-------------|
| `/` | Dashboard with stats, recommendations, course progress |
| `/kiki` | Voice chat with Kiki sommelier |
| `/discover` | Browse 104 sake products with filters |
| `/map` | Interactive Japan prefecture map |
| `/learn` | Course catalog with progress tracking |
| `/learn/[slug]` | Course detail with chapter list |
| `/learn/[slug]/[chapter]` | Chapter content with quiz |
| `/library` | Saved sake collection |
| `/settings` | Edit taste preferences |
| `/admin/learn` | AI course generator (admin only) |

## Getting Started

### Prerequisites
- Node.js 18+
- npm or yarn
- Convex account (free tier works)
- API keys for: OpenAI, Thesys, Gemini, Perplexity, Mapbox, Clerk

### Installation

```bash
# Clone the repository
git clone https://github.com/tmoody1973/sakeverse.git
cd sakeverse

# Install dependencies
npm install

# Set up Convex
npx convex dev
```

### Environment Variables

Create `.env.local`:

```env
# Convex (auto-generated by npx convex dev)
CONVEX_DEPLOYMENT=your-deployment
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud

# OpenAI (for voice + embeddings)
OPENAI_API_KEY=sk-...

# Thesys C1 (for dynamic UI)
THESYS_API_KEY=...

# Clerk (for auth)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_...
CLERK_SECRET_KEY=sk_...

# Mapbox (for Japan map)
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=pk...
```

Set Convex environment variables:
```bash
npx convex env set OPENAI_API_KEY sk-...
npx convex env set GEMINI_API_KEY ...
npx convex env set PERPLEXITY_API_KEY ...
```

### Running Locally

```bash
# Terminal 1: Convex backend
npx convex dev

# Terminal 2: Next.js frontend
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

### Import Data

```bash
# Import Tippsy sake catalog (104 products)
npx convex run importTippsy:importFromJSON

# Import wine-to-sake knowledge
npx convex run wineToSake:importWineToSakeKnowledge

# Import food pairing knowledge
npx convex run foodPairing:importFoodPairingKnowledge

# Import brewery data
npx convex run sakeBreweries:importBreweries

# Seed learning categories and sample course
npx convex run learn/seed:seedCategories
npx convex run learn/seed:seedSampleCourse
```

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Interface                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Dashboard â”‚ â”‚Voice Chatâ”‚ â”‚Japan Map â”‚ â”‚ Learning â”‚ â”‚Library â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚            â”‚            â”‚           â”‚
        â–¼            â–¼            â–¼            â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Query Router                                â”‚
â”‚  Wine preference? â†’ Wine-to-Sake RAG                            â”‚
â”‚  Product search?  â†’ Vector Search (104 products)                â”‚
â”‚  Food pairing?    â†’ Food Pairing RAG                            â”‚
â”‚  Prefecture info? â†’ Perplexity API (cached)                     â”‚
â”‚  Knowledge?       â†’ Gemini File Search (5 PDFs)                 â”‚
â”‚  Visual UI?       â†’ Thesys C1                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Convex Backend                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Products  â”‚ â”‚ Breweries â”‚ â”‚  Courses  â”‚ â”‚ User Progress   â”‚  â”‚
â”‚  â”‚ (Vector)  â”‚ â”‚ (50+)     â”‚ â”‚ Chapters  â”‚ â”‚ XP, Levels      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ Quizzes   â”‚ â”‚ Quiz Attempts   â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚ Knowledge â”‚ â”‚Prefecture â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Chunks    â”‚ â”‚Descriptionsâ”‚ â”‚  Users    â”‚ â”‚ Recommendations â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Gamification System

### XP Rewards
| Action | XP Earned |
|--------|-----------|
| Complete chapter | +25 XP |
| Pass quiz (first time) | +50 XP |
| Perfect quiz score | +100 XP |

### Level Progression
| Level | Title | XP Required |
|-------|-------|-------------|
| 1 | Sake Curious | 0 |
| 2 | Sake Novice | 100 |
| 3 | Sake Student | 300 |
| 4 | Sake Enthusiast | 600 |
| 5 | Sake Connoisseur | 1,000 |
| 6 | Sake Expert | 1,500 |
| 7 | Sake Master | 2,500 |
| 8 | Sake Sensei | 4,000 |
| 9 | Sake Legend | 6,000 |
| 10 | Sake Grandmaster | 10,000 |

## Kiro CLI Workflow

This project was built entirely with Kiro CLI, demonstrating AI-assisted development at scale.

### Custom Prompts Created

| Prompt | Purpose |
|--------|---------|
| `@prime` | Load project context at session start |
| `@plan-feature` | Create comprehensive implementation plans |
| `@execute` | Systematic task execution |
| `@code-review` | Technical code review pre-commit |
| `@update-devlog` | Maintain development documentation |

### Steering Documents

- **product.md**: Product vision, user stories, success criteria
- **tech.md**: Technical architecture, stack decisions, patterns
- **structure.md**: File organization, naming conventions

### Development Pattern

```
@prime â†’ @plan-feature â†’ @execute â†’ @code-review â†’ commit
```

## Project Structure

```
sakecosm/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx              # Dashboard
â”‚   â”œâ”€â”€ kiki/                 # Voice chat
â”‚   â”œâ”€â”€ map/                  # Japan prefecture map
â”‚   â”œâ”€â”€ learn/                # Learning system
â”‚   â”œâ”€â”€ discover/             # Product catalog
â”‚   â”œâ”€â”€ library/              # Saved sake
â”‚   â”œâ”€â”€ settings/             # User preferences
â”‚   â””â”€â”€ admin/learn/          # Course generator
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ map/                  # JapanMap, PrefecturePanel
â”‚   â”œâ”€â”€ voice/                # KikiChat, VoiceControls
â”‚   â”œâ”€â”€ ui/                   # RetroUI components
â”‚   â””â”€â”€ layout/               # Header, BottomNav
â”œâ”€â”€ convex/
â”‚   â”œâ”€â”€ schema.ts             # Database schema
â”‚   â”œâ”€â”€ map.ts                # Prefecture queries + Perplexity
â”‚   â”œâ”€â”€ learn/                # Courses, progress, quizzes
â”‚   â”œâ”€â”€ gamification.ts       # XP, levels, badges
â”‚   â”œâ”€â”€ recommendations.ts    # Personalized sake recs
â”‚   â””â”€â”€ embeddings.ts         # Vector search
â””â”€â”€ public/
    â”œâ”€â”€ badges/               # 10 level badge images
    â””â”€â”€ japan-prefectures.geojson
```

## Live Demo

ğŸŒ **Production**: [https://dynamous-kiro-hackathon.vercel.app](https://dynamous-kiro-hackathon.vercel.app)

## License

MIT

---

Built with ğŸ¶ and Kiro CLI for the Dynamous Hackathon 2026
